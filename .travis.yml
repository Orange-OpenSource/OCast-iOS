osx_image: xcode9.4
language: swift

branches:
  only:
    - master

before_install:
    - pod repo update
install:
    - pod install

script:
  - set -o pipefail
  - xcodebuild build -workspace OCast.xcworkspace -scheme OCast -sdk iphonesimulator -destination "platform=iOS Simulator,name=iPhone 7,OS=latest" GCC_INSTRUMENT_PROGRAM_FLOW_ARCS=YES GCC_GENERATE_TEST_COVERAGE_FILES=YES | xcpretty -s
  - xcodebuild build -workspace OCast.xcworkspace -scheme OCastDemoSwift -sdk iphonesimulator -destination "platform=iOS Simulator,name=iPhone 7,OS=latest" GCC_INSTRUMENT_PROGRAM_FLOW_ARCS=YES GCC_GENERATE_TEST_COVERAGE_FILES=YES | xcpretty -s
  - xcodebuild build -workspace OCast.xcworkspace -scheme OCastDemoObjC -sdk iphonesimulator -destination "platform=iOS Simulator,name=iPhone 7,OS=latest" GCC_INSTRUMENT_PROGRAM_FLOW_ARCS=YES GCC_GENERATE_TEST_COVERAGE_FILES=YES | xcpretty -s
